/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   test_big_int.c                                     :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: vphongph <vphongph@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2019/04/01 16:16:19 by vphongph          #+#    #+#             */
/*   Updated: 2019/05/30 22:06:49 by vphongph         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <stdio.h>
#include <unistd.h>
#include "libft/libft.h"
#include "ft_printf.h"
#include <limits.h>

const __uint128_t g_128max = 123;

// #define TEST_MAX ((__uint128_t)ULLONG_MAX * 0x1000000000000000 * 0x10 + ULLONG_MAX)
//
// #define UINT128_MAX ((__uint128_t)0xFFFFFFFFFFFFFFFF * 0x1000000000000000 * 0x10 + 0xFFFFFFFFFFFFFFFF)
// #define INT128_MIN ((__uint128_t)0x8000000000000000 * 0x1000000000000000 * 0x10)
// #define INT128_MAX (INT128_MIN - 1)
// #define DISTRIB_INT128_INT16 ((__uint128_t)0x0001000100010001 * 0x1000000000000 * 0x10000 + 0x0001000100010001)
// #define MANTISSA_TAB 64

// #define BIG_INT_DIGIT 37
// #define BIG_INT_CARRY ((__uint128_t)10000000000000000000ULL * 1000000000000000000)
// #define BIG_INT_MAX (BIG_INT_CARRY - 1)
// #define BIG_INT_FACTOR (UINT128_MAX / BIG_INT_CARRY)
// #define BIG_INT_TAB 312
// #define BIG_INT_POW2 5
// #define BIG_INT_POW2_RES 32
// #define BIG_INT_POW5 2
// #define BIG_INT_POW5_RES 25
// #define BIG_INT_EXPO 16445


// #define BIG_INT_DIGIT 36
// #define BIG_INT_CARRY ((__uint128_t)10000000000000000000ULL * 100000000000000000)
// #define BIG_INT_MAX (BIG_INT_CARRY - 1)
// #define BIG_INT_FACTOR (UINT128_MAX / BIG_INT_CARRY)
// #define BIG_INT_TAB 320
// #define BIG_INT_POW2 8
// #define BIG_INT_POW2_RES 256
// #define BIG_INT_POW5 3
// #define BIG_INT_POW5_RES 125
// #define BIG_INT_EXPO 16445


// #define BIG_INT_DIGIT 35
// #define BIG_INT_CARRY ((__uint128_t)10000000000000000000ULL * 10000000000000000)
// #define BIG_INT_MAX (BIG_INT_CARRY - 1)
// #define BIG_INT_FACTOR (UINT128_MAX / BIG_INT_CARRY)
// #define BIG_INT_TAB 329
// #define BIG_INT_POW2 11
// #define BIG_INT_POW2_RES 2048
// #define BIG_INT_POW5 5
// #define BIG_INT_POW5_RES 3125
// #define BIG_INT_EXPO 16445


// #define BIG_INT_DIGIT 34
// #define BIG_INT_CARRY ((__uint128_t)10000000000000000000ULL * 1000000000000000)
// #define BIG_INT_MAX (BIG_INT_CARRY - 1)
// #define BIG_INT_FACTOR (UINT128_MAX / BIG_INT_CARRY)
// #define BIG_INT_TAB 339
// #define BIG_INT_POW2 15
// #define BIG_INT_POW2_RES 32768
// #define BIG_INT_POW5 6
// #define BIG_INT_POW5_RES 15625
// #define BIG_INT_EXPO 16445


// #define BIG_INT_DIGIT 33
// #define BIG_INT_CARRY ((__uint128_t)10000000000000000000ULL * 100000000000000)
// #define BIG_INT_MAX (BIG_INT_CARRY - 1)
// #define BIG_INT_FACTOR (UINT128_MAX / BIG_INT_CARRY)
// #define BIG_INT_TAB 349
// #define BIG_INT_POW2 18
// #define BIG_INT_POW2_RES 262144
// #define BIG_INT_POW5 7
// #define BIG_INT_POW5_RES 78125
// #define BIG_INT_EXPO 16445

// #define BIG_INT_DIGIT 31
// #define BIG_INT_CARRY ((__uint128_t)10000000000000000000ULL * 1000000000000)
// #define BIG_INT_MAX (BIG_INT_CARRY - 1)
// #define BIG_INT_FACTOR (UINT128_MAX / BIG_INT_CARRY)
// #define BIG_INT_TAB 372
// #define BIG_INT_POW2 25
// #define BIG_INT_POW2_RES 33554432
// #define BIG_INT_POW5 10
// #define BIG_INT_POW5_RES 9765625
// #define BIG_INT_EXPO 16445


// #define BIG_INT_DIGIT 20
// #define BIG_INT_CARRY ((__uint128_t)10000000000000000000ULL * 10)
// #define BIG_INT_MAX (BIG_INT_CARRY - 1)
// #define BIG_INT_FACTOR (UINT128_MAX / BIG_INT_CARRY)
// #define BIG_INT_TAB 576
// #define BIG_INT_POW2 61
// #define BIG_INT_POW2_RES 2305843009213693952
// #define BIG_INT_POW5 26
// #define BIG_INT_POW5_RES 1490116119384765625
// #define BIG_INT_EXPO 16445



/*
ATTENTION MACRO, priorité de calcul se fait après avoir été écrit, penser à mettre des parenthèses
ATTENTION % -> & ne fonctionne qu'avec multiple de puissance de 2 comme / ->  >>
*/

//
// __int128_t mth_fast_pow(__int128_t nb , __int128_t exponent)
// {
// 	if (exponent == 1)
// 		return (nb);
// 	if (!(exponent & 1))
// 		return (mth_fast_pow(nb * nb, exponent / 2));
// 	return (nb * mth_fast_pow(nb * nb, (exponent - 1) / 2));
// }

//
// __int128_t	*big_int_fast_pow(__int128_t nb , __int128_t exponent)
// {
// 	if (exponent == 1)
// 		return (nb);
// 	if (!(exponent & 1))
// 		return (mth_fast_pow(nb * nb, exponent / 2));
// 	return (nb * mth_fast_pow(nb * nb, (exponent - 1) / 2));
// }

// __uint128_t	*big_int_pow(__uint128_t *tab_nb, int16_t tab_size)
// {
// 	__uint128_t *tab_multi;
// 		int16_t tab_size
//
// 	if (!(tab_multi = (__uint128_t *)malloc(sizeof(__uint128_t) * tab_size)))
// 	{
// 		ft_putstr_fd_v2(RED"Big int pow -> malloc  ∅\n"RESET, 2);
// 		return (NULL);
// 	}
// 	while (tab_size-- > 0)
// 	{
// 		while ()
// 		while (tab_multi[tab_size] > 10)
// 		{
// 			if (tab_multi[tab_size] % 10)
// 				tab_nb = big_int_x(tab_nb, tab_size, tab_multi[tab_size] % 10);
// 			else
// 				tab_nb = big_int_x(tab_nb, tab_size, 10);
// 			tab_multi[tab_size] /= 10;
// 		}
// 		if (tab_multi[tab_size])
// 			tab_nb = big_int_x(tab_nb, tab_size, tab_multi[tab_size]);
// }
//



void lol_write_space(int z)
{
	(void)z;
	write(1,"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			"                                                                                                                                                                                                        "
			, z);
}

int16_t	*big_int_add_one(__uint128_t *tab_nb, int16_t index, __uint128_t one)
{
	__uint128_t tab_nb_tmp[BIG_INT_TAB];

	ft_bzero_v2(tab_nb_tmp, sizeof(tab_nb_tmp));
	tab_nb_tmp[index] = one;
	big_int_add(tab_nb, tab_nb_tmp, BIG_INT_TAB);

	return (0);
}

int16_t check_trailing(__uint128_t *tab_nb, int16_t index, __uint128_t one)
{
	if (tab_nb[index] % one)
		return (1);
	while (++index < BIG_INT_TAB)
		if (tab_nb[index])
			return (1);
	return (0);
}

int16_t check_round(__uint128_t *tab_nb, int16_t index, __uint128_t one)
{
	__uint128_t to_round;
	int16_t trailing;

	to_round = tab_nb[index] / one % 10;

	if (to_round > 5)
		big_int_add_one(tab_nb, index, one * 10);
	if (to_round == 5)
	{
		trailing = check_trailing(tab_nb, index, one);
		// trailing = 0;
		if (one < BIG_INT_CARRY / 10)
			if (tab_nb[index] / (one * 10) % 2 || trailing)
				big_int_add_one(tab_nb, index, one * 10);
		if (one == BIG_INT_CARRY / 10)
			if (index > 0 && (tab_nb[--index] % 2 || trailing))
				big_int_add_one(tab_nb, index, 1);
	}
	return (0);
}

int			jump(int *i, int *current, int location)
{
	int tmp_i = *i;
	int tmp_current = *current - 1;
	*i += (location - tmp_current) / BIG_INT_DIGIT;
	if ((location - tmp_current) % BIG_INT_DIGIT)
		*i += 1;
	*current +=  BIG_INT_DIGIT * (*i - (tmp_i + 1));

	if (*i < BIG_INT_TAB)
	{
		printf(YELLOW"OK JUMP"RESET"\n");
		return (*current);
	}
	return (-1);
}

int16_t	big_int_round(__uint128_t *tab_nb, uint16_t tab_size, int16_t location)
{
	int i;
	int current;
	__uint128_t carry;
	i = 0;

	int z = -1;

	current = 1;
	carry = BIG_INT_CARRY / 10;

	while (i < tab_size && !tab_nb[i])
		i++;
	while (i < tab_size && !(tab_nb[i] / carry))
		carry /= 10;
	while (i < tab_size && carry)
	{
		z++;
		if (current == location)
		{
			lol_write_space(z);
			ft_putnbr_base(carry, 10, 10);
			printf("\n");
			return (check_round(tab_nb, i, carry));
		}
		current++;
		carry /= 10;
	}
	printf("I first : %d\n", i);
	printf("current first : %d\n", current);
	carry = BIG_INT_CARRY / 10;
	if ((z = jump(&i, &current, location)) < 0)
		carry = 0;
	z -= 2;
	printf("I : %d\n", i);
	printf("current : %d\n", current);
	while (carry)
	{
		z++;
		if (current == location)
		{
			lol_write_space(z);
			ft_putnbr_base(carry, 10, 10);
			printf("\n");
			return (check_round(tab_nb, i, carry));
		}
		current++;
		carry /= 10;
	}
	printf("current %d\n", current);
	printf("location %d\n", location);
	return (0);
}

int		big_int_rm_1st_dec(__uint128_t *tab_nb, int16_t tab_size)
{
	int16_t i;
	__uint128_t carry;


	i = 0;
	carry = BIG_INT_CARRY / 10;
	while (i < tab_size && !tab_nb[i])
		i++;
	while (carry)
	{
		if (tab_nb[i] / carry)
		{
			tab_nb[i] %= carry;
			return (1);
		}
		carry /=10;
	}
	return (0);
}


int		main(void)
{
	__uint128_t tab128[BIG_INT_TAB];
	__uint128_t tab128_2[BIG_INT_TAB];
	int16_t tab_expo[MANTISSA_TAB + 1];
	int i = 0;
	int j = 0;

	(void)tab_expo;
	t_longf ulf1;(void) ulf1;
	t_longf ulf2;(void) ulf2;
	t_float uf2;(void) uf2;

	uf2.y.sign = 0;
	uf2.y.exponent = 0b00000000001;
	uf2.y.mantissa = 0b0000000000000000000000000000000000000000000000000001;

	ulf2.y.sign = 0;
	ulf2.y.exponent = 0b000000000000000;
	ulf2.y.mantissa = 0b1000000000000000000000000000000000000000000000000000000000000000;

	// ulf2.y.sign = 0;
	// ulf2.y.exponent = 0b011110111111111; // prec 154
	// ulf2.y.mantissa = 0b1000000000000000000000000000000000000000000000000000000000000000;

	// ulf2.x = uf2.x;
	// ulf2.x = 2.095L; //prec 2
	// ulf2.x = 2.999L; // prec 2, nb of 0 change cause dec smaller and need to print so, counting again is needed
	// ulf2.x = 2.9L; // prec 0 , nb of 0 change cause dec smaller bu§t no need to print so ok
	// ulf2.x = 0.850000000000000000L;
	// ulf2.x = 0.50000000000000000L;

	// printf("%.70Lf\n",ulf2.x);

	int precision = 17000;


	// ulf2.x = 2.5L;

	printf("HERE %.*Lf\n\n", precision, ulf2.x);


	// ft_printbin(ulf2.y.sign, 1, 'b');
	// printf("\n");
	ft_printbin(ulf2.y.exponent, 15, 'b');
	printf("\n");
	ft_printbin(ulf2.y.mantissa, 64, 'b');
	printf("\n\n");

	ft_bzero_v2(tab128, sizeof (tab128));
	// ft_bzero_v2(tab_expo, sizeof (tab_expo));

	ft_bzero_v2(tab128_2, sizeof (tab128_2));

	// while (i < BIG_INT_TAB)
	// {
		// ft_putnbr_base(tab128[i], 10 , 0);
		// printf("\n");
		// i++;
	// }
	// tab128[BIG_INT_TAB -4] = 1;
	// tab128_2[BIG_INT_TAB -3] = 42L;

	// tab128[BIG_INT_TAB -3] = 1;
	// tab128_2[BIG_INT_TAB -2] = 0;

	// tab128[BIG_INT_TAB -2] = 12345;
	// tab128[BIG_INT_TAB -1] = (BIG_INT_CARRY / 10 * 5) + BIG_INT_CARRY / 100 * 5 + 6546546546546549879ULL;
	// tab128[BIG_INT_TAB -1] = 6546546546546549879;
	// tab128_2[BIG_INT_TAB -1] = 1;
	i = lf_get_mantissa_pow(tab_expo, ulf2.x);
	printf("smallest mantissa %d\n\n", i);
	big_int_calc_dec(tab128, BIG_INT_TAB, tab_expo);
	j = big_int_count(tab128, BIG_INT_TAB);
	big_int_calc_int(tab128_2, BIG_INT_TAB, tab_expo);


	//
	// big_int_print(tab128, BIG_INT_TAB);
	printf("\n");
	// ft_putnbr_base(tab128[0], 10, 0);
	// printf("\n");


	big_int_round(tab128, BIG_INT_TAB, (precision + 1) - (i - j));

	// printf("nb 0 : %d\n", i - big_int_count(tab128, BIG_INT_TAB));

	// big_int_print(tab128, BIG_INT_TAB);
	printf("\n");

	if (i - big_int_count(tab128, BIG_INT_TAB) < 0)
	{
		big_int_rm_1st_dec(tab128, BIG_INT_TAB);
		big_int_add_one(tab128_2, 359, 1);
	}

	// check_round(tab128, 359, BIG_INT_CARRY / 10);
	// big_int_add_one(tab128, 359, 0);

	// ft_putnbr_base(tab128[358], 10, 0);
	// printf("\n");
	// big_int_add_one(tab128, 359, 1);
	// while (i < 100)
	{
		// i = lf_get_mantissa_pow(tab_expo, ulf2.x);
		// printf("%d\n", i);
		// big_int_calc_int(tab128, BIG_INT_TAB, tab_expo);
		// big_int_print(tab128, BIG_INT_TAB);
		// ft_bzero_v2(tab128, sizeof (tab128));
		// write(1,".",1);
		// big_int_calc_dec(tab128, BIG_INT_TAB, tab_expo);
		// write(1,"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", i - big_int_count(tab128, BIG_INT_TAB));
		// big_int_print(tab128, BIG_INT_TAB);
		// write(1,"\n",1);
		// i++;
	}
	// check_round(tab128, 358, 100000000000);

	// ft_bzero_v2(tab128, sizeof (tab128));
	// big_int_calc_int(tab128, BIG_INT_TAB, tab_expo);

	// int i = 1;
	// while (i < 100)
	// {
		// big_int_x(tab128, BIG_INT_TAB, 2);
		// big_int_pow_of_2(tab128, BIG_INT_TAB, 16383);
		// big_int_pow_of_2(tab128_2, BIG_INT_TAB, 16383);
		// while (i++ < 64)
			// big_int_add(tab128, tab128_2, BIG_INT_TAB);
		// i++;
	// }

	// printf("\nbig int "ALLIANCE"DEC"RESET" print out : %d\n\n", big_int_print(tab128, BIG_INT_TAB));
	printf("precision %d\n", precision -  (i - big_int_count(tab128, BIG_INT_TAB)));
	printf("\nbig int "ALLIANCE"n DEC"RESET" print out : %d\n\n", big_int_n_print(tab128, BIG_INT_TAB, precision -  (i - big_int_count(tab128, BIG_INT_TAB))));

	// printf("nb 0 : %d\n", i - big_int_count(tab128, BIG_INT_TAB));

	printf("\nbig int "ORDER"INT"RESET" print out : %d\n\n", big_int_print(tab128_2, BIG_INT_TAB));



	// printf("digit : %d\n\n", big_int_count(tab128, BIG_INT_TAB));

	// printf("\nretour n nbr : %d\n", ft_putnnbr_base(UINT128_MAX, 10, 0, 7));
	// printf("\n");

	i = 0;
	while (i < MANTISSA_TAB + 1)
	{
		// printf("%d\n", tab_expo[i]);
		i++;
	}

	return (0);

}

// 340282366920938463463374607431768211455

// 009999999999999999999999999999999999999 (37 chiffres)
// 339999999999999999999999999999999999966 (999... * 34)

// 000999999999999999999999999999999999999 (36 chiffres)
// 124999999999999999999999999999999999875 (999... * 340)

// 000099999999999999999999999999999999999 (35 chiffres)
// 339999999999999999999999999999999996600 (999... * 3402)

// 000009999999999999999999999999999999999 (34 chiffres)
// 340279999999999999999999999999999965972 (999... * 34028)

// 000000999999999999999999999999999999999 (33 chiffres)
// 340281999999999999999999999999999659718 (999... * 340282)

// 0000000000000000000 99999999999999999999 (20 chiffres)
// 3402823669209384633 96597176330790615366 (999... * 3402823669209384634)

// Tableau partie entière : 4933 / 37 (round up)->   134 int 128 -> 2144 octets
// Tableau partie décimale : 16445 / 37 (round up)-> 445 int 128 -> 7120 octets
// TOTALE : 579 int 128 -> 9264 octets

// Nouveau calcul, flaot min = 11 514 chiffres -> 312 int 128 -> 4992 octets
// Mais choix de 318 int 128 -> 5088 octets
// Attention pour faire addition -> double -> 10176 octets


// 30454106285624997126104319962 1099634714882089299843985214622076787 9046465864508157020504708088128206007 9077863223152088073309905828759668895 5562103009770419360352428123639782183 4621767340641765110249872962255743398 0267493516858984205457386298340517540 0866837597008673346307143437247315968 (vrai 32 ^ 191)
// 30454106285624997126104319962 1099634714882089299843985214622076787 9046465864508157020504708088128206007 9077863223152088073309905828759668895 5562103009770419360352428123639782183 4621767340641765110249872962255743398 +267493516858984205457386298340517540 +866837597008673346307143437247315968 (mien 32 ^ 191)
//      111 10000101 11101110 00010000 11010101 11011010 01000110 11011001 00000000 11110100 00110110 10011111 11111111 11111111 11111111 11111111 (BIG_INT_MAX putnbr_base)
// 00000111 10000101 11101110 00010000 11010101 11011010 01000110 11011001 00000000 11110100 00110110 10011111 11111111 11111111 11111111 11111111 (BIG_INT_MAX printbin)

// 11 514 chiffres 2^-16 382 + ... + 2^-16 445 sans les leading 0 672420628622418701216083568145525774494331809633100049857774937804812906440935988538334824386677267204404774247506422593445548820873500317129828982711906024133610197541101627188940672801968869676824384701915629899429215268683860438982617221486458696576796409529842287834629644216707498058687848735159553783461246933552067183002893342938420803568105077310852283796672709150115749768746108720430701996971578046145150465652698293359552842354748661615072272505462733527453704558716602379736774934263645583870482630862482277568696432387873157508589824917935459011969004884321899767077095288450668477697220125638517814531242820123526046781040722946928673980367976778672938999248467685662841372953673374952536269361731086541857979862395465168536246781820334856894128922939914752213290120057853741727395288421687998823402376589265730643226612149390585164336835557543051551461375719495132926304810341995230216215806673174132632284758038490900565919320599160416831887030383364004208911470266863593466380337286759745829105137691045498001744571857507679258654559232332994412224723100964676284885321420922599670405321854921342129871433525027673220151245687681874140804759457159192153056507736091327176491132070289540273523037878546038741875187950422298768669195590751887269745140991622214848920842319562938328388097000375581205887522806004115984946383479009555106270968393983178717835751725292634578384468247250609951892826622105882535227277831927778459441639889039543749841157123748092768423119459818463957777158666158166800059098242762037586606204171765474421358216444692278893120252186058893968269225271818818791708286741488638492114707980231887468531559064188568025801922417724098702210627403182720981946654196604756511353012324311674321623453992277292098213790859915015397481925095337954964588440866866637024834365974719572679222567849534446651601453641954960797575565234055834090664161799542590268035863366151342686546506381726716241945581294703316801728562019800437999292057100416480555081451620203617860911380887169350267176086925527843517374433841772832837674671951574602036208410810599311290584245980175944615011300226110063730938675432925298584011580956725785366301953730348193286018697542804738195353849093254569947532246088161420934936556211473267049431054688544633072012087891329323238914015892993436794875674631781896283807427596068628928939683718715305291840890504960223854126161204500534191807791498029756953971506894357053648364674829468948409476378511226364466635318054860411387363500727784265254472491491349997344903753781788428538154054862189201808211600669920401911464499881645867562350388902788736621602451322058856085748068974184765908124709998552864435650977410830649475044813216765100142689176622257964898595266714604363481927666898155788973921117241664590788762457266527673505515101282561526229476022243921392339137333707336233749803582475756801632789926510644509901032168491463057895950806827611044813560877242049220953725698380012381637386545212712160362705797477538146707165574822371407475415551608858347606847961036376618772881648605128265101546417615260033837693792915933871294165240872146217010677568243269841568538667745937145949453856140386880976481290193456944421715562276387784152031536722122814819411708292220516802121618079556399310718743033748466485794334229985738574939225411144253437350195870685819492070426512633481997130790157879026078547395768290552530140183984734070508500352696935135735050623548972149699239571995631772072359682959976515115407796422517688395605123291604530192327071412084281991297928626486762018776125195071832981356264632218438165079836260299970519701718362435419574520581201424357396015877216398206228211740853263291609257223284887582405344561965072442073991783146465962495685925539523771142074485729896053853410723755361682771679792073543172086204050530774925559439163096366351668706955531968779942606965029064821319139243021514671950518453815051385439293545617374819018983729996957082443783159306977062227240550213062132102655721534348267953136898668455243225316014004511054838061168634544740361982558972798972527424787939473342059032022479520468256486365423745468728045420816754728052428511033704072284104735195873185903940701988338732490857911262236822730550331622078122801897839016044296380450218804712290878687138272864228351932398000020251485886789861367692464577116518495019657302604532325555989320770407188097499350355960603389456459639968591369369509554746775753479480181122269843278132495587205732898890641789680440862110977471042621663462917966888933762063037536948056373257129060875471222524229299527734845158045361097821400765712991260428345059376250514546391131898479154803691351597520842111206746368931828248960672718697222855072299926445990585564052808193080597297865803698149815822325080527366382069690509515457526232881535254790957741326451599464206854318823046950677829312540746633093065966230957495298402770611396732930354456515641975893513951186414736176613352717056311952614503061979669396446977059113188163796202194673413272721434629514608552036732131982429738321726769193978000708105270261443536246728292637823262051550061791032714530417232038740987610402661237246385356059892234600426056529405219809769937223648856068175171338421042119082751524342758297275171914903280895454374902248833317161089275546790441038338479582309499400448667950918179970338142666657699219889793034048154501298667740757439645598915815681030458231102334468909063744599625743269397977584713608303980224859373066829928663593069643383360686386419983202938221072269703193804708709935847936960646976652752170013815788542636854358911201041735404311164204089987101923961933667756110673387387710060457460572454853775649424904680798551409953604939274637546410382956817166636656661855110828944869133491291724027882032486382650924819822527004063682992376483330423813477499830625646186936005189860719453854015766574912541585514930082594225738707322371165681244323276584144584472756407297498277998052244071432993624793600585440537531407642770400563915820166559174853817634873632848942053095463924088879960865157422570000909858655925900340456006349985460922225502760264740230468589719039008626334081909794725480146980819683744420856212603257553131062059593592201566451159112516021299473813485387819379588905370764682200103267086009183815960227266491317057530751645405659224221814491394350098659757535351402576144706678105746242953181132577502443501313091254148042724824856280539489058308371678783696036888422636240212286546035523233764696227472291489614014105398292951785835129215279387462709536074355187035701321370958598756031943364571842612854594156143837400996941461594669354846117010903930746412522799237413540396705291147433753156590620918407842694642784401955483262496617171397239126555594766391759147911509059331560582995078294653335102364109998165078718619318623006914656464443660860709340139079888540281838705940406412860639136173408897230829044537200826842178584811890149893227612296543851116908807017579677909374360876136584615806334703656159044025453796497534120236134201677372568138708539705268180287133400036351264046595985149483396749894091721577334660429274521003827542722175226600828708302401832652712531977987917254486877456440496027937200496734248236450386540404340900592836149627472084557929183556162719317331455344781713656698706192864786420725878071031399602374664659437700025196894792298729931686634573260896690556831420778196495155690153475094227889372545515190054197572042609487807954949246883980141724857899601181790468142485452441661622776335482303267937415887354206836195369358580541924677206024834717179837890158625707446979544869860455052068488755552422731768008146014494363960594229904970617014856190307838101087243234375808182356935792011590110090850158467103480662709204817059750985352669430774935878860366622201451439903888140510125817722328193980620692742756210264045358124041627987366575170846404501227875377546845355760612264136926372795763049089681427275156382507776525350325190745468602260039694560280012997930421077810878363836559026609060649284491705826485488177046332501407891364465878848347276650118547551760146947751618609546021552623239999113889974014394581538238322952869198936588327499741545741272167418110953409633966809449088063072911436405795624708940631620080245187237983751842626985523157225810154515481921900996687354094960110891974502839324232877774529295796792552726967827354359645400341358133839799333537375104245705349091016417985024741737591217196924122649314864419456740038174554592917551876558967905908912855011904679438899993097197573142505838697882163648619295722113165499455251840763806638473174415614243501110432144422553097098470035188039058712059116290373127854515935174977954060864333562161143137196843929301529040112687894782216320409146605976145547593414830196312663585723367581709263287861388619818689596937916047473468751973207304735533352261696746808239983264611425139974020400701925611837619837360286850025168196892384977088271060050069631486994951501419874391494488475051514202259574243333107855536510117622733832528194092463419388902918455545786660132444637788616709587097888815710431395008342842439396284256696981771494785636888127162639330805148621070792960048215347661190418534707253908566146385299175141929200030262543171324462718026031035456458341877135231401651087530784627138450534876634252001554774311888781830553879857943274234886541979852799122879479501052899680185960116334243364634047957602546057297086555024565951870068157905390628980405978980965029861889806049411233667033396601910218233169584622971868302736673130966907946520905286723222918621665624175328264769612477795470359397742640078282312398532399680927594640544619392227095301141163506387095156130288276880536461330820479774643150263510958320451478756512858924320815434214673496888912926164395094246739138977171748835487828425817506458545200813017733476423979737846788046143508762588498878440456308209035361958818026398258303171412518977792559117788623860657721172102632783141142981998823155440531726650878207637478116983220666484783560887702472799258016454110152957740003127145551916206123627372103155165403194760212769392473701412475193263549270488880789785288017751860281559236924773730320491663214248109124014417087916481956405224027444091154240193154908672002175949940211452066022955514600405253557898150763098395043819170845138921953829526545854398725525544425555499320173821868935102520523827855357748975331172938450070205661705191155111681736285308274371586631795854059826388593592872623221858498615930251676579758130125680812441580822656761158639566476364138454857695840759842768926156707945446684441581415342978451605498049230353166552810107196011794932238607076724362894864268051466584915805299667764636942446351857161365809374766273252019910775648346601176044149805909867139354948237774450783472794054360145922926304062954773064973754451743319399905705374889080649092075479208937282921902865327356111495629372924318051067643656740202072186518013532188133341472832245095039207042248364854021414495790361715084760596416456300620031516254587305978176412939871019839406564591032146992230748209249128644667183450334999129052584601388306281206228700722558642918219260336426516638758923126803166141947826548191363282743324802476226791120864068908601830472176213267832321679407238974880747609299324885344601113142787423076677752064711494707304875823796425637742328039316762620670499392819011037613696427995377777959649517240779096434279790077086987324903967387099466054494724005503696051544437750635552220046520233154296875
